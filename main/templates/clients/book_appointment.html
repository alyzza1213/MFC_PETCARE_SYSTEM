{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üêæ Book Appointment</title>
<link rel="stylesheet" href="{% static 'css/style.css' %}">
<style>
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f4f8; margin: 0; padding: 0; }
header { background-color: #008080; color: white; padding: 15px 0; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1);}
header nav a { color: white; text-decoration: none; margin: 0 15px; font-weight: 600;}
header nav a:hover { text-decoration: underline;}
.appointment-section { max-width: 700px; margin: 80px auto; background: linear-gradient(145deg, #ffffff, #f9fcfc); padding: 35px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08); animation: fadeIn 0.6s ease-in;}
.appointment-section h2 { text-align: center; color: #006666; margin-bottom: 25px; font-size: 1.8rem;}
form label { display: block; margin: 15px 0 5px; font-weight: 600; color: #333;}
form input, form select, form textarea { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ccc; margin-bottom: 15px; font-size: 1rem;}
form textarea { resize: vertical; min-height: 80px;}
button { background: linear-gradient(90deg, #008080, #00b3b3); color: white; border: none; padding: 14px; border-radius: 10px; cursor: pointer; width: 100%; font-size: 16px; font-weight: 600; transition: transform 0.2s, background 0.3s;}
button:hover { transform: scale(1.03); background: linear-gradient(90deg, #006666, #009999);}
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
@media (max-width: 600px) { .appointment-section { margin: 50px 15px; padding: 25px; } }
</style>
</head>
<body>
<header>
    <h1>üêæ Book Appointment</h1>
    <nav>
        <a href="{% url 'homepage' %}">Home</a>
        <a href="{% url 'pet_profile' %}">My Pets</a>
        <a href="{% url 'vet_availability' %}">Vet Availability</a>
        <a href="{% url 'logout' %}">Logout</a>
    </nav>
</header>

<div class="appointment-section">
    <h2>Schedule Your Pet's Appointment</h2>
    <form method="POST">
        {% csrf_token %}

        {% if pets %}
            {% for pet in pets %}
                <div class="pet-service-row">
                    <input type="checkbox" name="selected_pets" value="{{ pet.id }}" id="pet_{{ pet.id }}">
                    <label for="pet_{{ pet.id }}">{{ pet.name }} ({{ pet.species }})</label>

                    <label for="service_{{ pet.id }}">Select Service:</label>
                    <select name="service_{{ pet.id }}" id="service_{{ pet.id }}">
                        <option value="Consultation">Consultation</option>
                        <option value="Check-up">Check-up</option>
                        <option value="Vaccination">Vaccination</option>
                        <option value="Grooming">Grooming</option>
                    </select>
                </div>
            {% endfor %}
        {% else %}
            <p>No pets available. Add a pet first.</p>
        {% endif %}

        <label for="slot">Select Vet Slot:</label>
        <select name="slot" id="slot" required>
            {% if available_slots %}
                {% for slot in available_slots %}
                    <option value="{{ slot }}">{{ slot|time:"h:i A" }}</option>
                {% endfor %}
            {% else %}
                <option disabled>No available slots. Check back later.</option>
            {% endif %}
        </select>

        <label for="notes">Notes (optional):</label>
        <textarea name="notes" id="notes" placeholder="Any special requests..."></textarea>

        <button type="submit">Book Appointment</button>
    </form>

    {% if qr_code_url %}
        <hr>
        <h3>Pay with GCash</h3>
        <p>Scan this QR to complete your payment:</p>
        <img src="{{ qr_code_url }}" alt="GCash QR Code" style="width:250px; display:block; margin:auto;">
    {% endif %}
</div>
</body>
</html>
